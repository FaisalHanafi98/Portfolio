# AWS App Runner configuration
version: 1.0
runtime: corretto17
build:
  commands:
    pre-build:
      - echo "Installing dependencies..."
    build:
      - ./gradlew build -x test
    post-build:
      - echo "Build completed successfully"
  env:
    - name: GRADLE_USER_HOME
      value: /tmp/.gradle
run:
  runtime-version: corretto17
  command: java -jar build/libs/portfolio-0.0.1-SNAPSHOT.jar
  network:
    port: 8080
  env:
    - name: SPRING_PROFILES_ACTIVE
      value: prod
    - name: DATABASE_URL
      value: "${DATABASE_URL}"
    - name: CORS_ALLOWED_ORIGINS
      value: "${CORS_ALLOWED_ORIGINS}"
